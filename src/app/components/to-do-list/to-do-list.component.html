<div class="container">
    <br>
    <br>
    <form >
        <input
            type="text"
            name="id"
            #id
            placeholder="nombre usuario"
            class="form-control"
            autofocus
        >
        <br>
        <button
            class="btn btn-success btn-block"
            (click)="loggin(id.value)"
        >
            Login
        </button>
        <button
            *ngIf="currentUser.id !==''"
            (click)="back()"
            class="btn btn-danger btn-block"
            style="margin-left: 3px;"
        >
            back
        </button>
    </form>
    <hr>
    <div class="col-md-4 offset-md-4">
        <div class="card">
            <div class="card-body">
                <form >
                    <div class="form-group">
                        <textarea
                            type="text"
                            name="description"
                            [formControl]="description"
                            #descripcion
                            placeholder="description"
                            class="form-control"
                        ></textarea>
                        
                        <small *ngIf="description.hasError('required') && description.dirty">El campo es requerido</small>
                    </div>
                    <br>
                    <div class="form-group">
                        <input
                        
                            type="number"
                            name="estimation"
                            #estimacion
                            [formControl]="estimation"
                            placeholder="estimation"
                            class="form-control"
                            autofocus
                        >
                    </div>
                    <br>
                    <button
                        *ngIf="currentUser.id === ''"
                        class="btn btn-success btn-block"
                        (click)="createUsuario(descripcion.value,estimacion.value)"
                        disabled
                        type="reset"
                        [disabled]="description.invalid"
                        [disabled]="estimation.invalid"

                    >
                        Add
                    </button>
                    <br>
                    <div
                        *ngIf="currentUser.id !==''"
                        class="alert alert-primary"
                        role="alert"
                    >
                        <h6>
                            El codigo de login es: {{currentUser.id}}
                        </h6>
                    </div>
                    <button
                        *ngIf="currentUser.id !==''"
                        class="btn btn-success btn-block"
                        (click)="createTask(descripcion.value,estimacion.value)"
                        type="submit"
                        [disabled]="description.invalid"
                    >
                        Add task
                    </button>
                </form>
            </div>
        </div>
    </div>
    <hr>
    <h3>Por Hacer</h3>
    <div class="table table-dark offset-md-4">
        <thead>
            <tr>
                <th scope="col">description</th>
                <th scope="col">estimation</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let task of user1.task">
                <td>{{task.description}}</td>
                <td>{{task.estimation}}</td>
                <td>
                    <button
                        class="btn btn-outline-success"
                        (click)="completedTask(user1.id,task.id)"
                    >
                        listo
                    </button>
                </td>
                <td>
                    <button
                        class="btn btn-outline-danger"
                        (click)="deleteTask(user1.id,task.id)"
                    >
                        delete
                    </button>
                </td>
                <td>
                    <button
                        class="btn btn-outline-info"
                        (click)="ngModal(contenido,  user1.id,task.id)"
                    >
                        editar
                    </button>
                </td>
            </tr>
        </tbody>
    </div>
    <hr>
    <h3>Finalizadas</h3>
    <div class="table table-dark offset-md-4">
        <thead>
            <tr>
                <th scope="col">description</th>
                <th scope="col">estimation</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let task of user1.endTask">
                <td>{{task.description}}</td>
                <td>{{task.estimation}}</td>
                <td>
                    <button
                        class="btn btn-outline-success"
                        (click)="pendingTask(user1.id,task.id)"
                    >
                        activar
                    </button>
                </td>

            </tr>
        </tbody>
    </div>
</div>

<ng-template
    #contenido
    let-modal
>
    <div class="col-md-4 offset-md-4">
        <div class="card">
            <div class="card-body">
                <form #login="ngForm" (ngSubmit)="completeLogin(login)">
                    <div class="form-group">
                        <textarea
                            type="text"
                            name="description"
                            id="description"
                            [formControl]="description"
                            placeholder="description"
                            class="form-control"
                            autofocus
                         
                            
                        ></textarea>
                    </div>
                    <br>
                    <div class="form-group">
                        <input
                            type="number"
                            name="estimation"
                              [formControl]="estimation"
                            placeholder="estimation"
                            class="form-control"
                            autofocus
                        >
                    </div>
                    <br>
                    <button
                        class="btn btn-success btn-block"
                        (click)="updateUsuario(description.value, estimation.value)"
                        type="reset"
                        [disabled]="estimation.invalid"
                        [disabled]="description.invalid"
                        id="btn"
                    >
                       Update
                    </button>
                </form>
            </div>
        </div>
    </div>

</ng-template>
